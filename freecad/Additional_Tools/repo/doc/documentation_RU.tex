\documentclass[a4paper,12pt]{article}

\title{addFC -- дополнительные инструменты для FreeCAD}
\author{Голодников Сергей}
\date{\today}

\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}
\usepackage{fontspec}
\setmainfont{PT Astra Serif}
\usepackage[ddmmyyyy]{datetime}
\renewcommand{\dateseparator}{.}
\usepackage{graphicx}
\usepackage{caption}
\captionsetup[figure]{name=Изображение}
\usepackage[
	pdfauthor={Golodnikov Sergey},
	pdftitle={Additional tools for FreeCAD},
	pdfsubject={addFC},
	colorlinks=true,
	linkcolor=blue]{hyperref}




\begin{document}
\maketitle




\section{Цели и задачи}

\begin{itemize}
	\item Генерация спецификации материалов на основе модели.
	\item Пакетная обработка деталей из листового металла.
	\item Помощь в создании конструкторской документации.
	\item Библиотека компонентов.
	\item Автоматизация процессов.\\
\end{itemize}

Главная задача верстака -- упростить работу с большими и «сложными» сборками, в особенности со сборками содержащими детали из листового металла. «Сложными» я называю параметрические модели (сборки) с большим количеством объектов и узлов в виде ссылок и связей (App::Link). Основной смысл в повторном использовании компонентов.

\begin{figure}[htp]
	\centering
	\includegraphics[scale=0.46]{img/assembly_example.png}
	\caption{Пример «сложной» сборки}
	\label{sec:assembly_example}
\end{figure}

\begin{center}\emph{Логика работы базируется на добавлении пользовательских свойств к объектам, придавая им определённые смысловые значения.}\end{center}




\section{Панель инструментов}

При выборе верстака \textbf{addFC} станет доступна панель его инструментов, выглядит она так:

\begin{figure}[htp]
	\centering
	\includegraphics[scale=0.8]{img/toolbar.png}
	\caption{Панель инструментов}
	\label{sec:toolbar}
\end{figure}

\begin{flushleft}Инструменты по порядку:\end{flushleft}
\begin{enumerate}
	\item Открыть последний рабочий файл -- \textbf{Recent File} (клавиша R).\label{sec:1}
	\item Изометрический вид и отображение в размер окна -- \textbf{Display} (клавиша D).\label{sec:2}
	\item Управление моделью -- \textbf{Model Control} (клавиша C).\label{sec:3}
	\item Спецификация материалов -- \textbf{Model Information} (клавиша I).\label{sec:4}
	\item Наполнение объекта свойствами -- \textbf{Add Properties} (клавиша A).\label{sec:5}
	\item Создать чертёж на основе шаблона -- \textbf{Creating a Drawing}.\label{sec:6}
	\item Библиотека элементов и узлов -- \textbf{Library} (клавиша L).\label{sec:7}
    \item Вид с разнесёнными частями -- \textbf{Explode} (клавиша E).\label{sec:8}
	\item Создание трубопровода по координатам -- \textbf{Pipe} (клавиша P).\label{sec:9}
    \item Помощь и примеры -- \textbf{Help and Examples}.\label{sec:10}
\end{enumerate}

Примечание: FreeCAD позволяет создавать дополнительные панели инструментов, рекомендую воспользоваться этим и создать из наиболее востребованных функций собственную панель для отображения её на своём основном рабочем верстаке, например в PartDesign.

\pagebreak




\section{Помощь и примеры}

В составе верстака есть образцы изучив которые можно лучше понять принципы его работы, чтобы открыть один из них -- воспользуйтесь командой \hyperref[sec:10]{Help and Examples} на панели инструментов. Наиболее подходящий пример -- \textbf{Assembly}, он и будет рассмотрен в данном руководстве.\\\\
Важно: корректное отображение моделей может зависеть от версии FreeCAD.


\begin{figure}[htp]
	\centering
	\includegraphics[scale=1]{img/assistant.png}
	\caption{Помощь и примеры}
	\label{sec:assistant}
\end{figure}

\begin{itemize}
	\item \textbf{Additional files} -- дополнительные файлы, такие как шаблоны чертежей, штриховки и шрифты.
	\item \textbf{Documentation} -- документация по работе с верстаком (этот файл).
	\item \textbf{Assembly} и \textbf{Belt Roller Support} -- примеры моделей (сборок) и работы со свойствами.\\Assembly -- модель параметрическая.
	\item \textbf{Pipe} -- пример использования инструмента \hyperref[sec:9]{Pipe}.
	\item \textbf{RU std: ЕСКД} -- оформление конструкторской документации по стандартам,\\включая автоматическую генерацию спецификации.
\end{itemize}

\pagebreak




\section{Параметры и настройки}

\begin{figure}[htp]
	\centering
	\includegraphics[width=1\textwidth]{img/pref_uProp.png}
	\caption{Свойства пользователя}
	\label{sec:pref_uProp}
\end{figure}

\subsection{Область 1 -- Наименование для группировки свойств}
Свойства, которые мы добавим объектам будут объединены в специальную группу с наименованием \textbf{«Add»}. Это облегчит визуальное восприятие и не позволит нашим свойствам смешиваться со стандартными.

\pagebreak


\subsection{Область 2 -- Свойства}

В данной таблице находятся все доступные для использования свойства.
\begin{itemize}
	\item \textbf{Title} -- наименование свойства (важно: только латинские символы).
	\item \textbf{Type} -- тип значения свойства, для использования доступны:
	\begin{itemize}
		\item \textbf{Bool} -- логический тип данных (true или false).
		\item \textbf{Enumeration} -- список из заранее заданных значений.
		\item \textbf{Float} -- число с плавающей точкой.
		\item \textbf{Integer} -- целое число.
		\item \textbf{String} -- текстовая строка.
	\end{itemize}
	\item \textbf{Addition} -- указывает на необходимость суммировать все значения свойства\\(пример использования: общая масса сборки).
	\item \textbf{Alias} -- псевдоним свойства, значение которое заменит \textbf{Title} при показе или\\ экспорте спецификации (позволяет обойти ограничение на латинские символы).
\end{itemize}

\begin{flushleft}Кнопки \textbf{Remove} и \textbf{Add} соответственно позволяют удалить выделенное в таблице свойство или добавить строку для создания нового.\end{flushleft}

\subsection{Область 3 -- Списки заранее заданных значений}
Все свойства с типом данных \textbf{Enumeration} отображаются в этой области.\\В колонке \textbf{Values} -- разделённые запятой значения для формирования списка.




\subsection{Стандартные свойства}

Неактивные свойства и значения в таблице, являются основными и требуются для корректной работы верстака.

\begin{center}\emph{Свойства должны придать смысловую нагрузку объектам FreeCAD.}\end{center}

\begin{itemize}
	\item \textbf{Name} -- имя, наименование объекта -- самое важное свойство, программа работает с элементами только при условии наличия у них имени. Наименование должно отражать суть объекта.
	\item \textbf{Code} -- кодовое обозначение элемента или детали.
	\item \textbf{Index} -- идентификатор для определения позиции объекта в сборке.
	\item \textbf{Material} -- материал объекта (список значений). Для листового металла это важное свойство, при создании плоского вида детали (развёртка) для оцинкованной и нержавеющей стали используются разные коэффициенты, также это свойство учитывается при сохранении развёртки во внешний файл. Дополнительно: к этому свойству можно привязать плотность и стоимость за единицу для автоматического подсчёта массы и себестоимости объекта.
	\item \textbf{MetalThickness} -- толщина металла, краткое обозначение: \textbf{«MT»}.
	\item \textbf{Node} -- наименование узла которому принадлежит объект, полезно для разделения итоговой спецификации на группы. Примечание: при отсутствии свойства или его значения используется имя (Label) документа.
	\item \textbf{Price} -- себестоимость объекта (может быть задана уравнением с привязкой к материалу).
	\item \textbf{Unfold} -- определяет необходимость создания плоского вида для конкретного объекта (актуально только для деталей из листового металла).
	\item \textbf{Weight} -- масса объекта (может быть задана уравнением с привязкой к материалу).
	\item \textbf{Quantity} и \textbf{Unit} -- количество и единица измерения \textbf{(-, m, kg, m², m³)}. Для штучных элементов значение по умолчанию в большинстве случаев -- это единица \textbf{(-)}. Для различных материалов доступны любые комбинации: например длина уплотнителя \textbf{1,2 m} или количество утеплителя \textbf{4,2 m²}. Важно: значения суммируются для одинаковых по наименованию объектов.
\end{itemize}


\subsection{Дополнительные свойтсва}

Эти свойства не являются основными (их можно удалить), но тем не менее они полезны в работе:
\begin{itemize}
	\item \textbf{Format} -- формат на котором выполнен документ (список значений).
	\item \textbf{Id} -- некий идентификатор объекта для связи с другой программой, например с 1С (код номенклатуры).
	\item \textbf{Note} -- заметка, напоминание или пояснение.
	\item \textbf{Type} -- тип объекта (список значений). Полезное свойство для группирования элементов при показе или экспорте спецификации.
	\item \textbf{Section} -- разделы спецификации по стандарту ЕСКД.
\end{itemize}

\begin{center}\emph{Для учёта объекта программой, только свойство \textbf{Name} является обязательным, все остальные используются по мере необходимости.}\end{center}

\begin{figure}[htp]
	\centering
	\includegraphics[scale=0.8]{img/properties.png}
	\caption{Пример объекта с заполненными свойствами}
	\label{sec:properties}
\end{figure}

\pagebreak


\begin{figure}[htp]
	\centering
	\includegraphics[width=1\textwidth]{img/pref_sm.png}
	\caption{Параметры листового металла}
	\label{sec:pref_sm}
\end{figure}

\subsection{Область 4 -- Цвет для детали из листового металла}
Цветовое отображение для объекта в формате HEX, значение по умолчанию: \verb|#b4c0c8|.

\subsection{Область 5 -- Параметры листовой стали}
В этой таблице указаны основные используемые толщины «\textbf{Thickness}» листового металла и их параметры, такие как внутренний радиус изгиба «\textbf{Radius}» и коэффициент К «\textbf{K-Factor}» используемый при расчёте плоского вида (развёртки).\\

\pagebreak


Кнопка \textbf{Calculate K-Factor} автоматически вычисляет коэффициент \textbf{К} для каждой толщины по формулам из сопротивления материалов:

\begin{figure}[htp]
	\centering
	\includegraphics[width=1\textwidth]{img/k_ru.png}
	\caption{Формулы вычислений параметров листового металла}
	\label{sec:k}
\end{figure}

\pagebreak


\begin{figure}[htp]
	\centering
	\includegraphics[width=0.9\textwidth]{img/pref_other.png}
	\caption{Дополнительные параметры}
	\label{sec:pref_other}
\end{figure}

\subsection{Область 6 -- Параметры шрифта интерфейса и дополнения}
В области \textbf{Font} можно указать необходимость подмены стандартного шрифта программы и его параметры, в области \textbf{Additions} отображено наличие в системе дополнений необходимых для полноценной работы данного верстака.

\subsection{Область 7 -- Параметры для шаблонов стандарта ЕСКД и СПДС}
В этой области можно указать значения для автоматического заполнения штампов при \hyperref[sec:6]{создании чертежей на основе шаблона} и автоматической генерации спецификации на основе модели. В качестве первого листа спецификации будет выбран шаблон указанный в соответствующем поле (шаблон текстового документа).

Все шаблоны находятся в директории -- \verb|addFC/repo/add/stdRU/tpl|

Для их корректного отображения вам \textbf{потребуется\\установить шрифт} -- \verb|addFC/repo/add/stdRU/OpenGost-A.ttf|\\

\pagebreak


\begin{figure}[htp]
	\centering
	\includegraphics[width=1\textwidth]{img/pref_materials.png}
	\caption{Материалы и их параметры}
	\label{sec:pref_materials}
\end{figure}

\subsection{Материалы}
На этой вкладке находится список материалов доступных для использования.
\begin{itemize}
    \item \textbf{Title} и \textbf{Category} -- наименование материала и его категория. Для работы с деталями из листового металла выбор материала ограничен соответствующей категорией.
    \item \textbf{Density} -- плотность материала, может использоваться для автоматического расчёта массы объекта, свойство «\textbf{Weight}».
    \item \textbf{Unit} и \textbf{Price per unit} -- цена за единицу материала, при необходимости может использоваться для расчёта себестоимости элемента, свойство «\textbf{Price}».
\end{itemize}

\pagebreak


\section{Наполнение объекта свойствами}

Для добавления свойств необходимо выделить один или несколько объектов и воспользоваться командой \hyperref[sec:5]{Add Properties} на панели инструментов.

\begin{figure}[htp]
	\centering
	\includegraphics[scale=0.7]{img/properties_add.png}
	\caption{Интерфейс команды \textbf{Add Properties}}
	\label{sec:properties_add}
\end{figure}

В интерфейсе команды виден весь список доступных пользовательских свойств. Необходимо отметить нужные и нажать \textbf{Add}.\\

Кнопки \textbf{All}, \textbf{Core}, \textbf{None} -- выбрать все свойства, только основные и очистить выбор,\\соответственно. Кнопка \textbf{Prev.} выделит свойства добавленные при последнем использовании команды.\\

Флажок \textbf{Set weight and price as an equation} -- если включено, добавленные свойства «\textbf{Weight}» и «\textbf{Price}» будут содержать уравнения для автоматического расчёта соответствующих параметров.

Флажок \textbf{Sheet metal part} отметит все необходимые свойства для детали из листового металла, позволит выбрать тип материала и при желании связать свойство «\textbf{MetalThickness}» с параметрами толщины объекта. Дополнительно элементу будет присвоен цвет на основе параметров указанных в настройках.\\

Примечание: В процессе присвоения имени «\textbf{Name}» и индекса «\textbf{Index}» программа пробует угадать значения свойств на основе наименования (Label) объекта.\\Для автоматического заполнения этих свойств шаблон наименования должен соответствовать: \textbf{«Index. Name - Copy»} или \textbf{«Index - Name - Copy»}. В случае соответствия шаблону значения будут корректно заполнены, пример -- \hyperref[sec:properties]{изображение 5}.

\pagebreak


\section{Спецификация материалов}

Для формирования и работы со спецификацией необходимо воспользоваться командой\\\hyperref[sec:4]{Model Information} на панели инструментов. На основе пользовательских свойств программа сформирует спецификацию для любой модели (сборки), рассмотрим пример из состава верстака:

\begin{figure}[htp]
	\centering
	\includegraphics[width=1\textwidth]{img/info_bom.png}
	\caption{Спецификация, общая}
	\label{sec:info_bom}
\end{figure}

\begin{figure}[htp]
	\centering
	\includegraphics[width=1\textwidth]{img/info_sm.png}
	\caption{Спецификация, листовой металл}
	\label{sec:info_sm}
\end{figure}


Интерфейс содержит две вкладки: \textbf{BOM} -- все объекты, \textbf{Sheet metal} -- объекты из листового металла.\\

Опция \textbf{Strict mode} -- если флажок снят программа будет обрабатывать все пользовательские свойства находящиеся в вашей группе -- \hyperref[sec:pref_uProp]{изображение 4: область 1}, а не только указанные в таблице (область 2).

\pagebreak


На вкладке \hyperref[sec:info_bom]{общей спецификации} расположены три кнопки:
\begin{itemize}
	\item \textbf{Indexing elements} -- автоматическое проставление позиций «\textbf{Index}» для всех учтённых в спецификации элементов.
	\item \textbf{Update enumerations} -- обновление в объектах модели свойств содержащих списки заранее заданных значений. Полезно после добавлении новый значений в настройках.
	\item \textbf{Update equations} -- обновление в объектах модели свойств содержащих связанные с материалами уравнения, свойства «\textbf{Weight}» и «\textbf{Price}».\\
\end{itemize}

Далее мы рассмотрим объекты из листового металла -- на \hyperref[sec:info_sm]{данной вкладке} расположены функции для их пакетной обработки. Производственный процесс таких деталей в большинстве случаев потребует два элемента:
\begin{itemize}
	\item Заготовка (развёртка) -- плоский вид объекта для нестинга и обработки на станках.
	\item Деталь в 3D формате (step) -- для гибки листового металла.
\end{itemize}

Все детали из сформированного на основе модели (сборки) списка, в зависимости от значения свойства \textbf{Unfold}, могут быть обработаны и экспортированы во внешние файлы, такие как dxf, svg (развёртки) и step (3D).\\

\textbf{Select a directory} -- позволяет выбрать директорию для сохранения результатов работы (значение по умолчанию -- рабочий стол пользователя).\\

\textbf{Unfold prefix} -- имя директории в которую будут сохранены файлы, а также вариант для подписи детали.\\

\textbf{File signature} -- список вариантов подписи детали. Подпись -- это текст в файле, внутри контура детали, который может быть полезен при нестинге. На данный момент функция доступна только для формата dxf. При значение \textbf{None} подпись отключена. Важно: для работы этой функции необходим Python модуль: \href{https://pypi.org/project/ezdxf/}{ezdxf}.\\

\textbf{File Name} -- шаблон по которому будут названы файлы, например для детали \textbf{«E2 - Stand»} (\hyperref[sec:properties]{изображение 5}) варианты имени будут следующими:
\begin{itemize}
	\item \textbf{Name} = Stand (1).dxf
	\item \textbf{Code} = E2 (1).dxf
	\item \textbf{Index} = 05 (1).dxf
	\item \textbf{Code + Name} = (E2) Stand (1).dxf
	\item \textbf{Index + Name} = (05) Stand (1).dxf
\end{itemize}

Цифра в скобках, в конце имени -- это номер экземпляра (копии), если в сборке две или более одинаковых детали они будут сохранены в отдельные файлы.\\

После выбора нужных опций и параметров можно нажать кнопку \textbf{Unfold} и программа сохранит все полученные данные по указанному пути. Процесс работы можно наблюдать в индикаторе прогресса и во FreeCAD, на панели отчёта (report view).\\

Важно: файлы деталей будут размещены в дополнительных директориях, имена которых соответствуют наименованию материала и толщины стали.

\pagebreak


\section{Экспорт спецификации}

Программа может экспортировать спецификацию модели (сборки) для последующего просмотра, редактирования или иного использования, доступные форматы:

\begin{itemize}
	\item \href{https://wiki.freecad.org/Spreadsheet_Workbench}{\textbf{Spreadsheet}} -- электронная таблица FreeCAD.
	\item \href{https://ru.wikipedia.org/wiki/JSON}{\textbf{json}} --  текстовый формат обмена данными, самый подходящий вариант для последующей автоматизации.
	\item \href{https://ru.wikipedia.org/wiki/CSV}{\textbf{csv}} -- представление базы данных.
	\item \textbf{RU std: Spreadsheet} -- создание электронной таблицы со спецификацией в формате ЕСКД.
	\item \textbf{RU std: TechDraw} -- выгрузка спецификации в оформлении текстового документа ЕСКД.\\
\end{itemize}

\begin{flushleft}Для начала рассмотрим параметры экспорта, кнопка \textbf{Export settings}.\end{flushleft}

\begin{figure}[htp]
	\centering
	\includegraphics[scale=1]{img/bom_export.png}
	\caption{Параметры экспорта спецификации}
	\label{sec:bom_export}
\end{figure}

В левой части интерфейса можно выбрать свойства которые будут экспортированы.\\

В области \textbf{Use aliases} нужно отметить форматы в которых будут использоваться псевдонимы, как замена имени «\textbf{Title}» свойства.\\

\pagebreak


В области \textbf{Order of elements} нужно указать свойства для группировки и сортировки объектов:

\begin{itemize}
	\item \textbf{Merger} -- свойство по значению которого элементы будут сгруппированы, самое\\подходящее -- тип объекта «\textbf{Type}», например вывести сначала все метизы, потом материалы, следом -- детали.
	\item \textbf{Sorting} -- свойство по значению которого объекты будут сортированы внутри группы (Merger), самое логичное -- сортировать по индексу «\textbf{Index}» или имени «\textbf{Name}».
\end{itemize}

Примечание: в вариантах выгрузки спецификации по правилам ЕСКД элементы будут\\сгруппированы по значениям свойства \textbf{Section}, в соответствии со стандартами оформления.\\

Выберете необходимые опции, подходящий формат и нажмите кнопку \textbf{Export}.

\begin{figure}[htp]
	\centering
	\includegraphics[width=1\textwidth]{img/bom_result.png}
	\caption{Результат экспорта спецификации}
	\label{sec:bom_result}
\end{figure}

\begin{figure}[htp]
	\centering
	\includegraphics[width=1\textwidth]{img/bom_result_ru.png}
	\caption{Результат экспорта спецификации по правилам ЕСКД}
	\label{sec:bom_result_ru}
\end{figure}

\pagebreak


\section{Управление моделью}

На панели задач доступна команда \hyperref[sec:3]{Model Control} назначение которой -- запустить управляющую программу для \textbf{параметрической} модели.\\

В своей работе я убедился, что не одна из существующих (для FreeCAD) систем сборок в комплексе с таблицами и уравнениями не способна дать таких возможностей, которые доступны из программного кода.

Своим параметрический моделям я пишу управляющие файлы и интерфейсы, вызывать которые удобно одной командой, для этого рядом с основным файлом модели (сборки) должны находиться два файла названные аналогично основному.\\

В образцах поставляемых вместе с верстаком доступен простой пример параметрической модели для изучения -- \verb|addFC/repo/example|

\begin{figure}[htp]
	\centering
	\includegraphics[scale=1]{img/example.png}
	\caption{Файлы параметрической модели}
	\label{sec:example}
	\end{figure}

\begin{itemize}
	\item \textbf{.FCStd} -- основной файл модели -- сборка.
	\item \textbf{.ui} -- интерфейс пользователя -- Qt.
	\item \textbf{.py} -- управляющий код -- Python.
	\item \textbf{noAssembly} -- директория с дополнительными файлами.
\end{itemize}

\pagebreak


\begin{flushleft}Открыв основной файл, командой \hyperref[sec:3]{Model Control} можно вызвать его управляющую программу:\end{flushleft}

\begin{figure}[htp]
	\centering
	\includegraphics[width=1\textwidth]{img/example_mc.png}
	\caption{Интерфейс управления параметрической моделью}
	\label{sec:example_mc}
\end{figure}

Для удобства графический интерфейс пользователя встроен в боковую панель FreeCAD, задав в нём необходимые параметры и выбрав из списков комплектующие нажмите кнопку \textbf{Rebuild} -- модель перестроится.

\pagebreak


\section{Создание трубопровода по координатам}

Команда \hyperref[sec:9]{Pipe} позволяет создать трубопровод по заданным координатам,
\emph{источником координат должны выступать точки} -- это либо \textbf{Point} (инструмент верстака Draft), либо \textbf{Datum Point} (верстак PartDesign). Первый вариант предпочтителен.

Создайте и расположите в 3D пространстве точки, для удобства их можно объединить в группу, как показано на примере (изображение 17).

Выделите в дереве проекта группу с точками или любой другой родительский элемент (в примере это pipe и path) и нажмите \hyperref[sec:9]{Pipe} на панели инструментов.

\begin{figure}[htp]
	\centering
	\includegraphics[scale=1]{img/pipe.png}
	\caption{Точки координат и интерфейс команды \textbf{Pipe}}
	\label{sec:pipe}
\end{figure}

В интерфейса доступно:
\begin{itemize}
	\item \textbf{Верхний раскрывающийся список} -- это шаблоны труб, доступные варианты:
	\begin{itemize}
		\item \textbf{OD - Copper pipe} -- дюймовые медные трубы в диапазоне от 1/4" до 4+1/8".
		\item \textbf{DN - Nominal pipe size} -- трубы по условному проходу.
		\item \textbf{DN - ВГП (водогазопроводная)} -- трубы по ГОСТ 3262-75.
	\end{itemize}
	\item \textbf{Pipe} -- вариант размера трубы из выбранного шаблона.
	\item \textbf{Diameter} -- диаметр, OD -- внешний, DN -- условный проход.
	\item \textbf{Fillet radius} -- радиус изгиба трубы.
	\item \textbf{Wall thickness} -- толщина стенки трубы.
	\item \textbf{Material} -- материал трубы, значения цвета и плотности.
\end{itemize}

При необходимости значения диаметра, изгиба и толщины стенки можно указать вручную, изменяя значения соответствующих полей.\\

После выбора необходимых параметров нажмите \textbf{Create pipe}.

\begin{figure}[htp]
	\centering
	\includegraphics[width=1\textwidth]{img/pipe_result.png}
	\caption{Результат работы команды \textbf{Pipe}}
	\label{sec:pipe_result}
\end{figure}

Программа получит координаты всех точек (сами точки будут сортированы по названию -- \textbf{Label}, в порядке возрастания) и построит трубопровод с заданными ранее параметрами.

На изображении показан результат работы команды, справа вариант с добавленными фитингами (команда \textbf{Add fittings}), в данном случае это углы двухраструбные под пайку.

Подробности можно посмотреть открыв соответствующий пример, воспользовавшись командой \hyperref[sec:10]{Help and Examples} на панели инструментов.

\pagebreak


\section{Вид с разнесёнными частями}

Команда \hyperref[sec:8]{Explode} отвечает за создание вида с разнесёнными частями (взрыв-схема) -- это эскизный вид конструкции (сборки) с разнесёнными составными частями, который позволяет передать информацию об изделии в более простом и удобном для понимания виде. Инструмент позволяет создавать, анимировать и сохранять виды.

\begin{figure}[htp]
	\centering
	\includegraphics[scale=0.42]{img/exploded_m_result.png}
	\caption{Пример работы команды \textbf{Explode}: вид модели с разнесёнными частями}
	\label{sec:exploded_m_result}
\end{figure}

\begin{figure}[htp]
	\centering
	\includegraphics[scale=0.42]{img/exploded_d_result.png}
	\caption{Пример работы команды \textbf{Explode}: экспорт вида в чертёж}
	\label{sec:exploded_d_result}
\end{figure}

\pagebreak


\begin{figure}[htp]
	\centering
	\includegraphics[width=1\textwidth]{img/exploded.png}
	\caption{Интерфейс команды \textbf{Explode}}
	\label{sec:exploded}
\end{figure}

В левой части интерфейса находятся группы, группа -- это один или несколько объединённых элементов. Чтобы создать группу нужно выделить объекты в дереве проекта или окне 3D вида и нажать кнопку добавить (\textbf{Add}). Созданные группы можно удалять (\textbf{Remove}) и перемещать по позициям (стрелки: вверх, вниз).

Двойной клик по имени группы сделает её активной, область: \textbf{Selected group}.

Элементы активной группы можно перемещать по координатам (\textbf{Position}) и вращать по осям (\textbf{Rotation}). Все действия отображаются в окне 3D вида и автоматически сохраняются.

Кнопка \textbf{Combine} возвращает всем элементам в группе исходное расположение.

Кнопка \textbf{Explode} переводит объекты группы в расположение заданное пользователем.\\

Список \textbf{Selection} - внешний вид выделенных объектов:
\begin{itemize}
	\item \textbf{Shape} -- заливка объекта цветом (стандартное выделение).
	\item \textbf{BoundBox} -- рамка вокруг объекта.
	\item \textbf{None} -- нет выделения.
\end{itemize}

\pagebreak


Вкладка \textbf{Trace} отвечает за направляющие -- это визуальные линии от исходной позиции элемента до его текущего расположения, указанного пользователем.
\begin{itemize}
	\item \textbf{Line style} и \textbf{Color} -- стиль направляющей линии и её цвет.
	\item \textbf{Line width} и \textbf{Point size} -- толщина линии и размер начальной и конечной точек.
	\item \textbf{Create} и \textbf{Remove} -- создать и удалить направляющие линии для группы.
\end{itemize}
Пример направляющих можно увидеть на изображениях \hyperref[sec:exploded_m_result]{19} и \hyperref[sec:exploded_d_result]{20}.\\

Вкладка \textbf{Animation} отвечает за анимацию разнесённого вида и экспорт анимации в видео файл.
Общий принцип работы таков: после перемещения и/или поворота объекта можно задать ключевой кадр (\textbf{Add key}) программа анимирует движение и/или вращение объектов от начального расположения до положения заданного ключевым кадром. Количество кадров неограниченно. Текущее количество кадров отображается в поле: \textbf{Key frames}. Кнопка \textbf{Clear} удалит все созданные ключевые кадры для группы.\\

\textbf{Speed} -- скорость воспроизведения анимации для текущего ключевого кадра.

\textbf{Split} -- если отмечено, то объекты в группе будут анимированы последовательно.

\textbf{Trace} -- отображать направляющие линии для объектов в процессе анимации.\\

Кнопка \textbf{Animate} -- воспроизвести анимацию по ключевым кадрам.

Галочка \textbf{Reverse}, если отмечена -- анимация будет воспроизведена в обратном порядке.

\textbf{Auto fit} -- автоматическое позиционирование камеры для отображения всех элементов.

\textbf{Export} -- при воспроизведении сохранить анимацию в видео файл.\\

Важно: для полноценной работы необходимы:
\begin{itemize}
	\item Python модуль \href{https://pypi.org/project/numpy}{NumPy} для анимации.
	\item Библиотека \href{https://www.ffmpeg.org/}{FFmpeg} для экспорта анимации в видео файл.
\end{itemize}

\pagebreak


\begin{figure}[htp]
	\centering
	\includegraphics[scale=1]{img/exploded_set.png}
	\caption{Опции экспорта анимации, кнопка \textbf{Export settings}}
	\label{sec:exploded_es}
\end{figure}

Опции экспорта -- это разрешение (\textbf{Resolution}) видео файла, его частота кадров (\textbf{Frame rate}), директория для сохранения результата -- кнопка \textbf{Select a directory}, а так же некоторые настройки покадровых изображений:

\begin{itemize}
	\item \textbf{Image format} -- PNG (выше качество) и JPG (быстрее).
	\item \href{https://wiki.freecad.org/Std_ViewScreenShot}{\textbf{Background} и \textbf{Creation method.}}
\end{itemize}

\pagebreak


\section{Библиотека элементов и узлов}

Скоро будет...




\end{document}
